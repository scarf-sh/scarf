<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Distributing your software with scarf - Scarf Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/theme.css" type="text/css" />
  <link rel="stylesheet" href="css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Distributing your software with scarf";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Scarf Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1 current">
		
    <a class="current" href=".">Distributing your software with scarf</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#using-scarf-as-software-distribution-tool">Using Scarf as software distribution tool</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#what-is-scarf-why-should-i-use-it">What is Scarf? Why should I use it?</a></li>
        
            <li><a class="toctree-l3" href="#how-it-works">How it works</a></li>
        
            <li><a class="toctree-l3" href="#installing-scarf">Installing Scarf</a></li>
        
            <li><a class="toctree-l3" href="#creating-your-scarf-account">Creating your Scarf account</a></li>
        
            <li><a class="toctree-l3" href="#creating-your-first-package">Creating your first package</a></li>
        
            <li><a class="toctree-l3" href="#viewing-your-package-analytics">Viewing your package analytics</a></li>
        
            <li><a class="toctree-l3" href="#connecting-a-stripe-account">Connecting a Stripe Account</a></li>
        
            <li><a class="toctree-l3" href="#adding-a-private-usage-tier-to-your-package">Adding a private usage tier to your package</a></li>
        
            <li><a class="toctree-l3" href="#keeping-scarf-up-to-date">Keeping Scarf up to date</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="end-user/">Scarf as system package manager</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="scarf-for-libraries/">Scarf SDK's for library authors</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="project-status/">Project Status and Roadmap</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Scarf Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Distributing your software with scarf</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="using-scarf-as-software-distribution-tool">Using Scarf as software distribution tool</h1>
<h2 id="what-is-scarf-why-should-i-use-it">What is Scarf? Why should I use it?</h2>
<p>Scarf makes it easy to publish your packages and developer tools to users on
Linux and Mac, understand how your software is being used, and charge the
companies that benefit from your work in a commercial setting.</p>
<p>Scarf is a developer-centric, cross-platform system package manager. If you
distribute your software with Scarf, your users will be able to easily install
it with the <code>scarf</code> CLI, and you'll gain insights into how your software is used
such as:</p>
<ul>
<li>Install counts</li>
<li>Exit codes when your program is invoked</li>
<li>Execution times</li>
<li>Sub-commands and flags that are passed on the command line</li>
<li>And much more</li>
</ul>
<p>For your users who wish to use your package without reporting usage statistics
(or those who just want to support your work), Scarf gives you an easy way to
collect payments in exchange. You can easily create a Scarf-connected Stripe
account, set your desired price for your package, and your users can easily pay
to use your package without reporting usage statistics.</p>
<p>The best part is that you can get all of these features without writing any
code! You simply upload your package to Scarf. The end-user will install your
package via <code>scarf</code> which installs your program in a way that that Scarf can
automatically capture your package's usage statistics and enforce permission
levels.</p>
<h2 id="how-it-works">How it works</h2>
<p>When a user installs your package through Scarf, it is installed inside of a
thin wrapper. This wrapper will log usage statistics automatically when it
invokes your package, and can also perform other checks, like whether the user
has purchased a particular tier of your package and its dependencies.</p>
<p>To get more information on how the CLI works, you can check out the code on
<a href="https://github.com/aviaviavi/scarf">Github</a></p>
<h2 id="installing-scarf">Installing Scarf</h2>
<p>On Debian-based linux systems, there is a dependency on <code>netbase</code></p>
<pre><code class="bash">$ sudo apt install netbase
</code></pre>

<p>To get Scarf, simply run:</p>
<pre><code class="bash">$ curl -L https://scarf.sh/install | bash
</code></pre>

<p>You'll then need to add <code>$HOME/.scarf/bin</code> to the front of your <code>PATH</code></p>
<h2 id="creating-your-scarf-account">Creating your Scarf account</h2>
<p>Head over to <a href="https://scarf.sh">https://scarf.sh</a> to register your developer
account.</p>
<h2 id="creating-your-first-package">Creating your first package</h2>
<p>Once you're registered, you'll want to create your package on the "New Package"
page of the <a href="https://scarf.sh/#/create-package">Scarf website</a>. The package name
here will be what users type when they install your package, but isn't
necessarily the name of the executable they will invoke.Scarf currently supports
packages in the form of:</p>
<ul>
<li>A locally built archive with an executable that can be run directly on the target platform.</li>
<li>An npm package that you upload to scarf rather than npm itself.</li>
</ul>
<p>Scarf is actively adding other package installation types. If your package type
isn't supported yet, let us know what you need and we'll prioritize it!</p>
<h3 id="define-your-package-specification">Define your package specification</h3>
<p>You can now add releases to your package that your users can install! A Scarf
package release primarily involves writing a small package specification or
uploading your npm package directly. </p>
<h4 id="yaml-specifications-archive-based-packages">Yaml specifications (archive based packages)</h4>
<p>Standard archive based packages can be described in yaml.</p>
<pre><code class="yaml">name:  &quot;curl-runnings&quot;
author: &quot;Avi Press&quot;
copyright: &quot;2019 Avi Press&quot;
license: &quot;MIT&quot;
version: &quot;0.11.0&quot;
# For each platform (currently MacOS and Linux_x86_64) you're distributing your release to, include an entry in distributions.
distributions:
  -
    platform: MacOS
    # The binaries your package provides. If your binary names are the same as
    # their path within your archive, you can simply provide a string of binary names
    bins:
      curl-runnings: path/inside/your/archive/curl-runnings
    # uri can be a remote or local tar archive
    uri: &quot;https://github.com/aviaviavi/curl-runnings/releases/download/0.11.0/curl-runnings-0.11.0-mac.tar.gz&quot;
    # [Optional] if your archive has extra files that should be included, list them here
    includes:
      - &quot;./directories&quot;
      - &quot;./or-files.txt&quot;
  -
    platform: Linux_x86_64
    bins:
      - curl-runnings
    uri: &quot;./path/to/local/archive.tar.gz&quot;
    includes: []
    depends:
      - scarf-packages
      - your-package
      - depends-on
</code></pre>

<p>Some notes: </p>
<ul>
<li>
<p>You can use <code>scarf check-package ./path/to/your/package-file.yaml</code> to
validate your package file. Currently, it won't do things like check your
archive or test your release, but it will make sure you spec type-checks, and
that you have a valid license type and platform.</p>
</li>
<li>
<p>Dependency handling is still immature. Chances are, the package you depend on
isn't on Scarf yet! We're working hard to fix that, however. Just send an email
to help@scarf.sh or reach out on <a href="https://gitter.im/scarfsh/community">gitter</a>
and we'll help get the packages you need. Currently any dependencies you add in
your scarf.yaml will use the latest validated version.</p>
</li>
</ul>
<h4 id="npm">NPM</h4>
<p>You can upload an npm based package to scarf rather than npm itself. It will be
globally installed by scarf just like any other scarf package. You'll need to
make sure your <code>package.json</code> includes a <code>main</code> entry that points to the script
that will be ultimately invoked, and the package must have a license.</p>
<p>You can use `scarf check-package ./path/to/your/package.json to
validate your package file.</p>
<h4 id="piggybacking-on-other-package-managers">Piggybacking on other package managers</h4>
<p>If your package is already distributed with another package manager, you can
configure Scarf to invoke that package install while still getting all the other
benefits Scarf provides. This can be useful to get your package on Scarf if
Scarf doesn't yet support your exact package type natively (if this is the case,
send us an email with what you need!). Scarf will call out to the external
manager on the users system.</p>
<pre><code class="yaml">...
bins: &amp;bins
  - bin1
  - bin2
  ...
  - binN
distributions:
  -
    external: Debian
    bins: *bins
  -
    external: RPM
    bins: *bins
  -
    external: Homebrew
    installCommand: &quot;install --special --flags my_package&quot;
    bins: *bins
  ...

</code></pre>

<p>Currently supported third party package types include:</p>
<ul>
<li>Homebrew</li>
<li>Debian (<code>apt</code>)</li>
<li>RPM</li>
<li>CPAN</li>
</ul>
<p>Let us know if you need something else!</p>
<h3 id="uploading-your-release">Uploading your release</h3>
<p>Once you have a valid spec, it's time to upload! You'll need your
<code>SCARF_API_TOKEN</code>, which you can find by going to your <a href="https://scarf.sh/#/user-account">account
page</a>. To upload, run:</p>
<pre><code class="bash">SCARF_API_TOKEN=${your_token} scarf upload ./path/to/your/validated-spec.(yaml|json)
</code></pre>

<p><strong>Packages on Scarf can't be deleted once they're uploaded!</strong> </p>
<p>Once your release is uploaded, your users can install your package with a simple:</p>
<pre><code class="bash">scarf install ${your_package_name}
</code></pre>

<h2 id="viewing-your-package-analytics">Viewing your package analytics</h2>
<p>Once you've pushed a release to your package, you can head over to the
<a href="https://scarf.sh/#/home">dashboard</a> to see your packages install and usage
stats!</p>
<h2 id="connecting-a-stripe-account">Connecting a Stripe Account</h2>
<p>Navigate to your account details page by clicking your username in the nav bar.
Find the <code>Connect to Stripe</code> button at the bottom, and follow Stripe's
onboarding process. It only takes a few minutes. You'll be redirected back to
Scarf when the enrollment is complete.</p>
<h2 id="adding-a-private-usage-tier-to-your-package">Adding a private usage tier to your package</h2>
<p>Now that you've connected a Stripe account, you're ready to start collecting
payments for your package! Navigate to your package detail page on Scarf and
click <code>Start monetizing &lt;package&gt;</code>. Set your price. That's it! Scarf handles all
user registration and payments so you are now fully ready to start making money
from your package. Stripe will send your payouts daily to your connected bank
account. (NOTE: your very first payout will go through 7 days after your account
is opened, so be patiend for your first payout.)</p>
<h2 id="keeping-scarf-up-to-date">Keeping Scarf up to date</h2>
<p>A simple upgrade command is all you need to get the latest version of Scarf</p>
<pre><code>$ scarf upgrade
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="end-user/" class="btn btn-neutral float-right" title="Scarf as system package manager">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="end-user/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>

</body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2020-03-13 21:20:06
-->
